/* native-js-libs - v1.2.2 */
(function(){var t,e,i,o,r,a,s,n,d,l,u,p,h,c=function(t,e){return function(){return t.apply(e,arguments)}};o={},window._gtAudioPlay=function(t){return o[t].play()},e=function(t,e){var i,r;return o[t]=e,r=n?"ontouchend='_gtAudioPlay("+t+")'":"data-click='play'",i="<div class='gt-audio-container'> <div class='gt-btn play' "+r+"></div> <div class='gt-btn pause' data-click='pause'></div> <div class='current-time'>00:00</div> <div class='timeline' data-mousedown='mouseDown'> <div class='cue-point playhead' data-mousedown='mouseDown'></div> <div class='cue-point first' data-mousedown='mouseDown'></div> <div class='cue-point last' data-mousedown='mouseDown'></div> </div> <div class='audio-duration'>00:00</div> <div class='separator'></div> <div class='gt-btn toggle-cue-points' data-click='toggleCuePoints'><div>ab</div></div> <div class='gt-btn record-button' data-click='toggleRecord'></div> <div class='separator'></div> <div class='playback-moins' data-click='decreaseSpeed'>-</div> <div class='speed-rate'>1.0</div> <div class='playback-plus' data-click='increaseSpeed'>+</div> <div class='waiting-recorder'>Waiting for microphone...</div> </div>"},window.GtAudioCss=function(){var t,e;return t=function(t,e){var i;return i=document.createElement("span"),i.style.color=t,i.style.visibility="hidden",document.body.appendChild(i),t=window.getComputedStyle(i).color,i.parentElement.removeChild(i),t.replace(/rgb\(([\d,\s?]+)\)/,"rgba($1,"+e+")")},e=function(e){var i,o,r,a,s,n,d,l,u,p,h,c,g,y,f;if(l=null!=e?e:{},o=l.background,c=l.text,u=l.separator,d=l.radius,f=l.width,a=l.full,h="gtaudio-style",!document.getElementById(h))return null==o&&(o="rgba(0, 0, 0, .8)"),null==c&&(c="#eee"),null==u&&(u=t(c,".2")),null==d&&(d=5),null==f&&(f=300),n=a?40:30,a&&(d=0),g=t(c,".2"),y={play:.8*n,time:1.2666*n,sep:1,speedbtn:.3*n,speed:.7333*n,btn:.8666*n},s={timeline:n-20},i=y.play+y.time+y.time+y.sep+y.speedbtn+y.speed+y.speedbtn+y.sep+y.btn,a||(y.timeline=f-i,i+=y.timeline),r=".gt-audio-hidden { height: 0 !important; width: 0 !important; overflow: hidden !important; } .gt-audio-container { position: "+(a?"fixed":"relative")+"; font-family: Arial; color: "+c+"; font-size: "+.43*n+"px; /*display: none;*/ display: inline-block; height: "+n+"px; border-radius: "+d+"px; background-color: "+o+"; overflow: hidden; -webkit-user-select: none; width: "+(a?"100%":i+"px")+"; z-index: 999; bottom: "+(a?"0":"auto")+"; left: "+(a?"0":"auto")+"; } .gt-audio-container > * { float: left; } .gt-audio-container *, .gt-audio-container *:before, .gt-audio-container *:after { box-sizing: border-box; } .gt-audio-player .separator { width: "+y.sep+"px; background-color: "+u+"; height: 100%; margin: 0; } .gt-audio-player .gt-btn { cursor: pointer; height: 100%; width: "+y.btn+"px; position: relative; line-height: "+n+"px; text-align: center; } .gt-audio-player .gt-btn:before { content: ''; position: absolute; display: block; width: "+.5333*n+"px; height: "+.5333*n+"px; top: 50%; left: 50%; margin-top: -"+.2666*n+"px; margin-left: -"+.2666*n+"px; } .gt-audio-player .play { display: block; } .gt-audio-player .play:before { content: ''; display: block; position: absolute; width: 0; height: 0; border: "+.2666*n+"px solid transparent; border-left-color: "+c+"; border-left-width: "+.5333*n+"px; } .gt-audio-player .play, .gt-audio-player .pause { width: "+y.play+"px; } .gt-audio-player .play:before, .gt-audio-player .pause:before { left: "+.2*n+"px; margin-left: 0; } .gt-audio-player.playing .play { display: none; } .gt-audio-player .pause { display: none; } .gt-audio-player .pause:before { border-left: "+.2*n+"px solid "+c+"; border-right: "+.2*n+"px solid "+c+"; } .gt-audio-player.playing .pause { display: block; } .gt-audio-player .playback-moins, .gt-audio-player .playback-plus, .gt-audio-player .speed-rate { line-height: "+n+"px; cursor: default; text-align: center; } .gt-audio-player .playback-moins, .gt-audio-player .playback-plus { cursor: pointer; font-weight: bold; width: "+y.speedbtn+"px; } .gt-audio-player .playback-moins { text-align: right; } .gt-audio-player .playback-plus { text-align: left; } .gt-audio-player .speed-rate { width: "+y.speed+"px; } .gt-audio-player .toggle-cue-points { font-size: "+.3*n+"px; font-style: italic; } .gt-audio-player .toggle-cue-points:before { border: "+.0333*n+"px solid "+c+"; border-left-color: transparent; border-right-color: transparent; border-radius: 100%; } .gt-audio-player .toggle-cue-points > div:after, .gt-audio-player .toggle-cue-points:after { content: ''; position: absolute; display: block; border: "+.0666*n+"px solid transparent; -webkit-transform: rotate(-45deg); } .gt-audio-player .toggle-cue-points > div:after { border-left-color: "+c+"; border-left-width: "+.1666*n+"px; right: "+.1*n+"px; bottom: "+.3*n+"px; } .gt-audio-player .toggle-cue-points:after { border-right-color: "+c+"; border-right-width: "+.1666*n+"px; left: "+.1*n+"px; top: "+.3*n+"px; } .gt-audio-player.has-cue-points .toggle-cue-points { color: #448ff9; } .gt-audio-player.has-cue-points .toggle-cue-points:after { border-right-color: #448ff9; } .gt-audio-player.has-cue-points .toggle-cue-points > div:after { border-left-color: #448ff9; } .gt-audio-player.has-cue-points .toggle-cue-points:before { border-color: #448ff9; border-left-color: transparent; border-right-color: transparent; } .gt-audio-player .cue-point { position: absolute; top: 0; width: "+n+"px; height: "+n+"px; border-radius: 100%; cursor: pointer; -webkit-transform: translate(-"+(n-s.timeline)/2+"px, -"+(n-s.timeline)/2+"px); transform: translate(-"+(n-s.timeline)/2+"px, -"+(n-s.timeline)/2+"px); } .gt-audio-player .cue-point:before { content: ''; width: "+s.timeline+"px; height: "+s.timeline+"px; border-radius: 100%; background: "+c+"; position: absolute; top: "+(n-s.timeline)/2+"px; left: "+(n-s.timeline)/2+"px; } .gt-audio-player.has-cue-points .cue-point { display: block; } .gt-audio-player .first, .gt-audio-player .last { display: none; } .gt-audio-player .first:before, .gt-audio-player .last:before { background: red; } .gt-audio-player .first { left: 0; } .gt-audio-player .last { left: "+(a?"-webkit-calc(100% - "+s.timeline+"px)":y.timeline-10+"px")+"; left: "+(a?"calc(100% - "+s.timeline+"px)":y.timeline-10+"px")+"; } .gt-audio-player .current-time, .gt-audio-player .audio-duration { margin: 0; cursor: default; line-height: "+n+"px; width: "+y.time+"px; text-align: center; } .gt-audio-player .timeline { position: relative; width: "+(a?"-webkit-calc(100% - "+i+"px)":y.timeline+"px")+"; width: "+(a?"calc(100% - "+i+"px)":y.timeline+"px")+"; height: "+s.timeline+"px; top: "+(n-s.timeline)/2+"px; border-radius: "+s.timeline+"px; background: "+g+"; cursor: pointer; } .gt-audio-player .record-button { display: none; } .gt-audio-player .record-button:before { background-color: red; border-radius: 100%; } .gt-audio-player.record-mode .toggle-cue-points { display: none; } .gt-audio-player.record-mode .record-button, .gt-audio-player.record-mode .waiting-recorder { display: block; } .gt-audio-player .waiting-recorder { width: 100%; display: none; position: absolute; line-height: "+n+"px; background-color: rgba(0, 0, 0, .7); color: white; text-align: center; cursor: default; } .gt-audio-player.recording .playback-moins, .gt-audio-player.recording .playback-plus, .gt-audio-player.recording .timeline, .gt-audio-player.recording .play { pointer-events: none; } .gt-audio-player.recording .record-button:before { box-shadow: inset 1px 1px 8px rgba(0, 0, 0, .5); }",p=document.createElement("style"),p.id=h,p.textContent=r,document.head.appendChild(p)},{loadCss:e,getAlphaColor:t}}(),h=.1,a="00:00",n=/iPhone|iPad|iPod/i.test(window.navigator.userAgent),s=/Android/i.test(window.navigator.userAgent),d=n||s,r=d?"touchend":"click",l=d?"touchstart":"mousedown",u=d?"touchmove":"mousemove",p=d?"touchend":"mouseup",i=function(){function t(t){var i,o,a;this.audio=t,this.toggleCuePoints=c(this.toggleCuePoints,this),this.mouseUp=c(this.mouseUp,this),this.mouseDown=c(this.mouseDown,this),this.movePoint=c(this.movePoint,this),this.setCurrentTime=c(this.setCurrentTime,this),this.increaseSpeed=c(this.increaseSpeed,this),this.decreaseSpeed=c(this.decreaseSpeed,this),this.timeUpdate=c(this.timeUpdate,this),this.durationUpdate=c(this.durationUpdate,this),this.pause=c(this.pause,this),this.play=c(this.play,this),this.getAudio=c(this.getAudio,this),this.playerMousedown=c(this.playerMousedown,this),this.playerClick=c(this.playerClick,this),this._removePlayClass=c(this._removePlayClass,this),this._addPlayClass=c(this._addPlayClass,this),s||(this.audio.volume=1),s||(this.audio.muted=!1),this.audio.preload="auto",this.audio.classList.add("gt-audio-hidden"),this.audio.removeAttribute("controls"),i=!0,s&&(o=this.audio.querySelector("source"))&&(i=this.audio.paused,this.audio.src=o.src,this.audio.removeChild(o)),this._playerAudio=document.createElement("div"),this._playerAudio.classList.add("gt-audio-player"),this._playerAudio.innerHTML=e(Date.now(),this.audio),a=d?this._playerAudio:window,a.addEventListener(p,this.mouseUp,!1),this._playerAudio.addEventListener(r,this.playerClick,!1),this._playerAudio.addEventListener(l,this.playerMousedown,!1),this._addAudioListeners(this.audio),s||this.audio.parentElement.insertBefore(this._playerAudio,this.audio.nextSibling),i||this.audio.play()}return t.prototype.remove=function(){return this._playerAudio.parentElement.removeChild(this._playerAudio)},t.prototype._addPlayClass=function(){return this._playerAudio.classList.add("playing")},t.prototype._removePlayClass=function(){return this._playerAudio.classList.remove("playing")},t.prototype._addAudioListeners=function(t){return t.addEventListener("playing",function(e){return function(){var i;e._addPlayClass(),s&&(t.pause(),t.muted=!0,t.volume=0,i=function(){var e,i;return e={method:"playAudio",params:{src:t.src}},i=encodeURIComponent(JSON.stringify(e)),window.parent.callGtNative("native://="+i)},window.addGtTask(i))}}(this),!1),t.addEventListener("pause",this._removePlayClass,!1),t.addEventListener("timeupdate",this.timeUpdate,!1),t.readyState?this.durationUpdate():t.addEventListener("loadedmetadata",this.durationUpdate,!1)},t.prototype.playerClick=function(t){var e;return!(e=this[t.target.getAttribute("data-click")])||e.apply(t.target,arguments)},t.prototype.playerMousedown=function(t){var e;return!(e=this[t.target.getAttribute("data-mousedown")])||e.apply(t.target,arguments)},t.prototype._=function(t){var e;return null==this.cache&&(this.cache={}),null!=(e=this.cache)[t]?e[t]:e[t]=this._playerAudio.querySelector("."+t)},t.prototype._timelineWidth=function(){return this.timelineWidth?this.timelineWidth:this.timelineWidth=this._("timeline").offsetWidth-this._("playhead").offsetWidth},t.prototype._timelineLeft=function(){return this._("timeline").getBoundingClientRect().left},t.prototype.getAudio=function(){return this._audioRecord||this.audio},t.prototype.play=function(){var t,e,i;if(t=this.getAudio(),t.readyState)return i=this._("playhead").offsetLeft,e=this._("first").offsetLeft,this.hasCuePoints&&(i<e||i>this._("last").offsetLeft)&&this.setCurrentTime(e+this._timelineLeft()),t.playbackRate=this.currentSpeed||1,this.getAudio().play(),this._addPlayClass()},t.prototype.pause=function(){return this.getAudio().pause(),this._removePlayClass()},t.prototype._unit=function(t){return t<10&&(t="0"+t),t},t.prototype._time=function(t){var e,i;return i=Math.floor(t%60),e=Math.floor(t/60%60),this._unit(e)+":"+this._unit(i)},t.prototype.durationUpdate=function(){return this._("audio-duration").textContent=this._time(this.getAudio().duration),this.timeUpdate()},t.prototype.timeUpdate=function(){var t,e,i;if(t=this.getAudio(),t.paused||this._addPlayClass(),this._("audio-duration").textContent===a&&(this._("audio-duration").textContent=this._time(t.duration)),i=t.currentTime,i>0?(this._("current-time").textContent=this._time(i),this._onPoint||(e=this._timelineWidth()*(i/t.duration),this._("playhead").style.left=e+"px")):(this._("current-time").textContent=a,this._onPoint||(this._("playhead").style.left=0)),!this._onPoint&&this.hasCuePoints){if(i>this.firstPointTime&&i<=this.lastPointTime)return void(this.currentTimeSetted=!1);if(this.currentTimeSetted)return;(i>=this.lastPointTime||i<this.firstPointTime)&&(this.currentTimeSetted=!0,t.currentTime=this.firstPointTime+.01,t.play())}},t.prototype._setSpeed=function(t){var e,i;if(this.currentSpeed=t,e=this.getAudio(),i=!e.paused,d&&i&&e.pause(),e.playbackRate=this.currentSpeed,this._("speed-rate").textContent=this.currentSpeed.toFixed(1),d&&i)return e.play()},t.prototype.decreaseSpeed=function(){if(!(this.currentSpeed<=.6))return this._setSpeed((null!=this.currentSpeed?this.currentSpeed:this.currentSpeed=1)-h)},t.prototype.increaseSpeed=function(){if(!(this.currentSpeed>=2))return this._setSpeed((null!=this.currentSpeed?this.currentSpeed:this.currentSpeed=1)+h)},t.prototype.setCurrentTime=function(t){var e,i,o;if(e=this.getAudio(),e.readyState)return i=(t-this._timelineLeft())/this._timelineWidth(),i<0&&(i=0),o=!e.paused,d&&o&&e.pause(),e.currentTime=e.duration*i,d&&o&&e.play(),this.timeUpdate()},t.prototype.movePoint=function(t){var e;return!this._onPoint||(t.preventDefault(),this._posX=t.clientX||t.touches[0].clientX,e=this._posX-this._timelineLeft(),e<0&&(e=0),e>=this._timelineWidth()&&(e=this._timelineWidth()),this._onPoint.style.left=e+"px",this._onPoint.classList.contains("playhead")?(this.setCurrentTime(this._posX),this._hasMoved=!0):void 0)},t.prototype.mouseDown=function(t){return!this.getAudio().readyState||(this._hasMoved=!1,t.target.classList.contains("timeline")?(this._onPoint=this._("playhead"),this.movePoint(t)):this._onPoint=t.target,window.addEventListener(u,this.movePoint,!1))},t.prototype._reverseCuePoints=function(){var t,e;return e=this._("last"),t=this._("first"),e.classList.remove("last"),e.classList.add("first"),t.classList.remove("first"),t.classList.add("last"),this.cache.last=t,this.cache.first=e},t.prototype.mouseUp=function(t){var e,i,o,r;return!this._onPoint||(window.removeEventListener(u,this.movePoint,!1),this.hasCuePoints&&(e=this._onPoint.classList,r=this._onPoint.offsetLeft,(e.contains("last")&&r<this._("first").offsetLeft||e.contains("first")&&r>this._("last").offsetLeft)&&this._reverseCuePoints(),e.contains("playhead")||(i=this._("first").offsetLeft,o=this._("last").offsetLeft,i===o&&(i-=.01*i,this._("first").style.left=i+"px"),this._posX=i+this._timelineLeft())),this._onPoint=null,this.setCuePointTimes(),this._hasMoved?void 0:this.setCurrentTime(this._posX))},t.prototype._cuePointTime=function(t){return this.getAudio().duration*(this._(t).offsetLeft/this._timelineWidth())},t.prototype.setCuePointTimes=function(){return this.firstPointTime=this._cuePointTime("first"),this.lastPointTime=this._cuePointTime("last")},t.prototype.toggleCuePoints=function(){return this.hasCuePoints=this._playerAudio.classList.toggle("has-cue-points"),this.setCuePointTimes()},t}(),window.GtAudioPlayer=i,t=function(){function t(){this._nodeRemoved=c(this._nodeRemoved,this),this._nodeInserted=c(this._nodeInserted,this),this._all=[]}return t.prototype.init=function(t){var e,i,o,r;for(GtAudioCss.loadCss(t),r=document.querySelectorAll("audio"),i=0,o=r.length;i<o;i++)e=r[i],this._push(e);return document.addEventListener("DOMNodeInserted",this._nodeInserted),document.addEventListener("DOMNodeRemoved",this._nodeRemoved)},t.prototype._push=function(t){if(!t.getAttribute("data-gt-record"))return t.currentSrc||t.src||t.querySelector("source")?this._all.push(new i(t)):void 0},t.prototype._nodeInserted=function(t){var e,i,o;return"AUDIO"===t.target.nodeName?this._push(t.target):"SOURCE"===t.target.nodeName?(e=t.target.parentElement,e.volume=0,e.muted=!0,i=0,o=setInterval(function(r){return function(){var a;return 20===i?clearInterval(o):(i++,(a=t.target.src)?(clearInterval(o),r._push(e)):void 0)}}(this),100)):void 0},t.prototype._nodeRemoved=function(t){var e,i,o,r,a,s;if("AUDIO"===t.target.nodeName&&(e=t.target),e)for(s=this._all,o=r=0,a=s.length;r<a;o=++r)if(i=s[o],i.audio===e)return i.remove(),void this._all.splice(o,1)},t}(),window.GtAudio=new t}).call(this);