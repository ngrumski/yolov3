/* native-js-libs - v1.2.2 */
var indexOf=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};window.GtRangy=function(t,e){var n,i,o,r,l,a,d,c,u,g,s,h,p,f,m,y,b,x,v,C,w,R,N,S,A,E,T,G,L,O,k,H,I,B,F,J,q,M,D,P,U,j,z,W,Y,Q,X,K,$,V,Z,_,tt,et,nt,it,ot;return b=M=null,x=v=null,J=[],q=[],y=[],n=p=E=o=null,N=!1,O={},T=null,h=!1,D=[],i={},u=g=null,C=null,S=window.location.href.split("/").pop(),Q=function(t){return"#gt-rangy-span-close { cursor:pointer; position:absolute; top:"+(t.top-25)+"px; left:"+(t.left+t.width-25)+"px; } #gt-rangy-span-close > span { display:block; margin:10px; z-index:100; width:30px; height:30px; font-size:30px; line-height:26px; font-weight:100; font-family:sans-serif; color:#eee; text-align:center; background-color:#666; border-radius:100%; }"},I={caseSensitive:!1,wholeWordsOnly:!1,withinRange:null,direction:"forward"},m=function(){var t;if(t=document.onselectionchange,void 0!==t)try{return document.onselectionchange=0,null===document.onselectionchange}finally{document.onselectionchange=t}return!1},r=function(t){return t.addEventListener("focus",function(){return h=!0}),t.addEventListener("blur",function(){return h=!1})},$=function(n){var l,c,s,h,p,f,x,v,w,R,N,S,A,E,T,L,O,H,I,B,F,J,q,U,j;for(T=null!=n?n:{},x=null!=(L=T.highlightColor)?L:"rgba(0,0,255,.3)",q=null!=(O=T.searchHighlightColor)?O:"rgba(255,0,0,.3)",A=null!=(H=T.noteHighlightColor)?H:"rgba(0,255,0,.3)",l=null!=(I=T.accessibility)?I:{highlight:{start:"Highlight start.",end:"Highlight end."},note:{start:"Note start.",end:"Note end."}},i=l,t||(t=window.GtConfig),e||(e=window.GtSelection),c="content:'';\ndisplay:inline-block;\nposition:absolute;\nwidth:24px; height:14px;\nbackground-color:inherit;\ntop:-20px; left:1px;\nmargin-bottom:10px;\nbox-shadow:1px 1px 2px rgba(0,0,0,0.8);\nborder-radius:3px; opacity:0.7;",s="content:'';\ndisplay:block;\nposition:absolute;\nwidth:5px;\nheight:5px;\nbackground-color:inherit;\ntop:-8px;\nleft:11px;\nmargin-bottom:10px;\nz-index:3;\ntransform:rotate(45deg);\nopacity:0.7;\nbox-shadow:1px 1px 2px rgba(0,0,0,0.8);",o("span.gt-highlight.gt-note-highlight","position:relative;"),o("span.gt-highlight.gt-note-highlight.note-icon:after",c),o("span.gt-highlight.gt-note-highlight.note-icon:before",s),E=arguments,j="gtrangy-style",document.getElementById(""+j)||(U=document.createElement("style"),U.id=j,U.textContent="."+t.SEARCHCLASS+" { background-color: "+q+"; } .gt-hidden-element { display: block !important; position: absolute !important; left: -100% !important; } .gt-note-indicator { cursor: pointer; display: block; width: 26px; height: 18px; border-radius: 2px; background-color: blue; border-color: blue; position: absolute; -webkit-tap-highlight-color: transparent; z-index: 10 } .gt-note-indicator:before { content: ''; display: block; position: absolute; width: 0; height: 0; border: 4px solid transparent; border-top-color: inherit; border-right-color: inherit; bottom: -7px; left: 50%; margin-left: -4px; }",document.head.appendChild(U)),u=x,g=A,t.isMobile?d():document.addEventListener("mousemove",G),p=m()?"selectionchange":"mouseup",document.addEventListener(p,P),B=document.querySelectorAll("textarea, input, [contenteditable]"),v=0,R=B.length;v<R;v++)h=B[v],r(h);for(rangy.init(),null!=e&&e.init(),b=rangy.createCssClassApplier(t.HIGHLIGHTCLASS),b.useExistingElements=!1,b.onElementCreate=k,M=rangy.createCssClassApplier(t.SEARCHCLASS),M.useExistingElements=!1,M.onElementCreate=function(t){return D.push(t)},window.parent.GtRangy&&window.parent!==window||(a(E),document.addEventListener(t.mousedown,function(){return C=null})),S=["HEAD","STYLE","SCRIPT","META","TITLE","LINK","STYLE"],F=document.querySelectorAll("*"),w=0,N=F.length;w<N;w++)h=F[w],f="none"===window.getComputedStyle(h).display,f&&(J=h.nodeName,indexOf.call(S,J)<0)&&y.push(h)},et=function(t){return n=t},tt=function(t){return p=t},d=function(){var t,e,n,i,o,r,l,a,d,c;for(t=[],d=["link","script","style"],o=0,l=d.length;o<l;o++)c=d[o],i=document.body.querySelectorAll(c),e=Array.prototype.slice.call(i,0),t=t.concat(e);for(r=0,a=t.length;r<a;r++)n=t[r],document.head.appendChild(n)},P=function(){var e,i,o,r,l;return l=h?"":window.getSelection().toString(),o=window.getSelection(),i=!1,o&&(e=[],o.isCollapsed||(e=f(o.getRangeAt(0))),i=R(o.anchorNode)||R(o.baseNode)||R(o.extentNode)||R(o.focusNode)||w(e)),t.isMobile?(r=function(){var t,e;return t={method:"selectedTextChanged",params:{selection:l,editable:h,isEquation:i}},e=encodeURIComponent(JSON.stringify(t)),window.parent.callGtNative("native://="+e)},window.addGtTask(r)):null!=n&&"function"==typeof n.setSelectedText?n.setSelectedText(l,T,i):void 0},R=function(t){for(var e,n;null!=t?t.parentNode:void 0;){if("GT-EQUATION"===t.parentNode.tagName||(null!=(e=t.parentNode.classList)&&null!=(n=e.value)?n.indexOf("gt-el-equation"):void 0)>-1)return!0;t=t.parentNode}return!1},w=function(t){var e,n,i,o,r;if(!(null!=t?t.length:void 0))return!1;for(n=0,i=t.length;n<i;n++)if(e=t[n],"GT-EQUATION"===(null!=e?e.tagName:void 0)||(null!=e&&null!=(o=e.classList)&&null!=(r=o.value)?r.indexOf("gt-el-equation"):void 0)>-1||w(e.childNodes))return!0;return!1},L=function(t){if(t.hasChildNodes())return t.firstChild;for(;t&&!t.nextSibling;)t=t.parentNode;return null!=t?t.nextSibling:void 0},f=function(t){var e,n,i;if(n=t.startContainer,e=t.endContainer,n===e)return[n];for(i=[];n&&n!==e;)i.push(n=L(n));for(n=t.startContainer;n&&n!==t.commonAncestorContainer;)i.unshift(n),n=n.parentNode;return i},G=function(t){var e,n;return e=t.clientX,n=t.clientY,p&&(e+=p.left,n+=p.top),T={x:e,y:n}},a=function(i){var o,l,a,d,c,u,g,s,h,f,m,y;for(c=d=null,m=document.querySelectorAll("script"),h=[],u=2,g=0,s=m.length;g<s;g++)f=m[g],y=f.getAttribute("src"),y&&(y.indexOf("onload")>=0&&(h[0]=y),y.indexOf("lib/rangy")>=0&&(h[1]=y),y.match(/GtSelection|GtRangy|GtAudio|ToggleTopbar/)&&(h[u++]=y));return o=function(){var o,r,l,a,u,g;if(c.GtConfig.isMobile=t.isMobile,c.document.addEventListener(t.mousedown,function(){return C=c,null!=e&&e.setIframe(C),!0}),c.GtRangy.init.apply(c,i),null!=(l=c.GtSelection)&&l.init.apply(c),null!=(a=c.ToggleTopBar)&&a.init.apply(c),null!=(u=c.GtAudio)&&u.init(),n){c.GtRangy.setWebReader.call(c,n),r=d.getBoundingClientRect();for(o in p)g=p[o],r[o]+=g;c.GtRangy.setFramePosition.call(c,r)}return c.GtRangy.highlight.call(c,J),c.GtRangy.highlight.call(c,q,!0),C=c},l=function(t){var e;return e=c.document.createElement("script"),e.src=t,c.document.body.appendChild(e),e},a=function(t){return f=t.shift(),f?l(f).onload=function(){return a(t)}:o()},document.addEventListener("DOMNodeInserted",function(t){var e,n;return e=t.target,"INPUT"===(n=e.nodeName)||"TEXTAREA"===n||null!=("function"==typeof e.getAttribute?e.getAttribute("contenteditable"):void 0)?r(e):"IFRAME"!==e.nodeName||(d=e,c=d.contentWindow,d.onload=function(){return c.GtRangy?o():a(h.slice(0))},!0)}),document.addEventListener("DOMNodeRemoved",function(t){return C===t.target&&(C=null),!0})},U=function(e){var i,o,r,l;e.stopPropagation(),i=e.target,v=i.getAttribute("data-gt-highlight-id"),i.classList.contains("gt-note-indicator")&&(i=document.querySelectorAll("span[data-gt-highlight-id='"+v+"']")[0]),o=JSON.parse(i.getAttribute("data-gt-highlight")),r=i.getBoundingClientRect(),o.top=r.top+((null!=p?p.top:void 0)||0),o.left=r.left+((null!=p?p.left:void 0)||0),t.isMobile?(l=function(){var t,e;return t={method:"highlightIsTouched",params:{highlight:o}},e=encodeURIComponent(JSON.stringify(t)),window.parent.callGtNative("native://="+e)},window.addGtTask(l)):(null!=n?n.setSelectedHighlight:void 0)&&n.setSelectedHighlight(i.getAttribute("data-gt-highlight"),o,T)},s=function(t){var e,n;for(e in O)if(n=O[e],n!==-1&&n<=t&&t<=n+2)return!0;return!1},E=function(t){var e,n,i;i='span.gt-highlight[data-gt-highlight-id="'+t+'"]',n=document.querySelectorAll(i),null!==n&&n.length>0&&(e=n[0],e.classList.add("note-icon"))},o=function(t,e){var n;return n=document.styleSheets[0].cssRules.length,document.styleSheets[0].insertRule(t+"{"+e+"}",n),n},l=function(e,n){var i;return i=function(){var i,o,r,l,a,d,c,u;if(t.isMobile)return E(e.getAttribute("data-gt-highlight-id"));for(l=document.createElement("span"),l.style.backgroundColor=n,l.style.borderColor=n,l.classList.add("gt-note-indicator"),l.setAttribute("data-gt-highlight-id",e.getAttribute("data-gt-highlight-id")),l.addEventListener(t.click,U,!1),document.body.appendChild(l),r=l.getBoundingClientRect().height+8,u=window.pageYOffset+e.getBoundingClientRect().top,u<=0&&(u=2),i=document.body,o=document.documentElement,c=Math.max(i.scrollHeight,i.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight),d=c-r,u>d&&(u=d),a=2;s(u);){if(u>=d){u=d;break}u+=2,a+=2}return l.style.top=u+"px",l.style.left=a+"px",O[l.getAttribute("data-gt-highlight-id")]=u}},j=function(t){switch(t){case"#FFEB6B":return"#FFDD00";case"#C0ED72":return"#8CEF0F";case"#ADD8FF":return"#2192F7";case"#FFB0CA":return"#EC175D";case"#D9B2FF":return"#3804FF";default:return t}},k=function(e){var n,o,r,a,d;o=i.highlight,a=i.note,e.addEventListener(t.mouseup,U,!1),N&&e.classList.add(t.NOTECLASS),e.setAttribute("data-gt-highlight",JSON.stringify(x)),e.setAttribute("tabindex","0"),e.setAttribute("role","link"),r=x.id,d=window.GtPdfJS.isPDF?j(x.color):x.color,n=x.color,e.setAttribute("data-gt-highlight-id",r),e.setAttribute("id",r),e.style.backgroundColor=d,e.style.margin=0,e.style.padding=0,window.setTimeout(function(){var t,n,i,r,l;if(r=N?a.start:o.start,i=N?a.end:o.end,t=r+" "+e.textContent+", "+i,e.setAttribute("aria-label",t),n=e.nextSibling,n&&3===n.nodeType&&(l=n.textContent.split("")," "===l[0]))return l.shift(),n.textContent=" "+l.join("")},100),t.isMobile&&window.setTimeout(function(){var t,n;if(n=e.parentNode&&X(e,"b-item"),!n)return t=e.parentNode.style.display,e.parentNode.style.display="none",e.parentNode.offsetHeight,e.parentNode.style.display=t},100),N&&(O[r]||(O[r]=-1,window.setTimeout(l(e,n),t.isAndroid?300:100)))},X=function(t,e){return!!(t.className&&t.className.split(" ").indexOf(e)>=0)||t.parentNode&&X(t.parentNode,e)},_=function(t,e){var n,i;return v=e||v,i=it(e),n=JSON.parse(i),i=K(i,n.isNote,t)},K=function(t,e,n){var i,o,r,l,a,d,c,s,h,p,f,m,w,R,A;if(null==e&&(e=!1),C)return l=C.GtRangy.highlight.apply(C,arguments),(e?q:J).push(l),l;if(x=i=v=null,N=!1,t){if("object"!=typeof t){try{t=JSON.parse(t)}catch(t){}if("object"==typeof t){if(t.location&&t.location!==S)return;i=[t]}else v=""+t;for(N=e,d=0,h=y.length;d<h;d++)r=y[d],r.classList.add("gt-hidden-element");w=rangy.getSelection(),null==i&&(i=w.saveCharacterRanges(document.body)),w.restoreCharacterRanges(document.body,i),A=w.text(),x=i[0],null==x.id&&(x.id=v),v=x.id,null==x.text&&(x.text=encodeURI(A.replace(/\n/g," ").trim())),x.isNote=!!e,x.location=S,document.getElementById("td0")&&(x.td0=Y("td0")),document.getElementById("td1")&&(x.td1=Y("td1")),document.getElementById("td9999")&&(x.td9999=Y("td9999"));try{window.frameElement&&(R=window.frameElement.getAttribute("style")||"",f=window.frameElement.getBoundingClientRect(),x.style=(R+" width:"+f.width+"px; height:"+f.height+"px;").trim())}catch(t){}for(n?x.color=n:x.color||(o=e?g:u,x.color=o),b.applyToSelection(),w.collapse(document.body,0),l=JSON.stringify(x),v&&(e?q:J).push(l),c=0,p=y.length;c<p;c++)r=y[c],r.classList.remove("gt-hidden-element");return l}for(e||(J=t.slice(0)),e&&(q=t.slice(0)),a=0,s=t.length;a<s;a++)m=t[a],K(m,e)}},F=function(t){var e;return e=document.createTextNode(t.textContent),t.parentNode.replaceChild(e,t)},B=function(t){var e;if(e=J.indexOf(t),e>-1&&J.splice(e,1),e=q.indexOf(t),e>-1)return q.splice(e,1)},it=function(t){var e,n,i,o,r,l;if(C)return r=C.GtRangy.unlight.apply(C,arguments),B(r),r;for(v=t||v,o="[data-gt-highlight-id='"+v+"']",i=document.querySelectorAll(o),e=0,n=i.length;e<n;e++)l=i[e],null==r&&(r=l.getAttribute("data-gt-highlight")),F(l);return B(r),delete O[v],r},ot=function(){var e,n,i,o;for(C&&C.GtRangy.unlightAll.apply(C,arguments),i=document.querySelectorAll("."+t.HIGHLIGHTCLASS),e=0,n=i.length;e<n;e++)o=i[e],F(o);J.length=0,q.length=0},W=function(t){var e,n,i,o;return C?(e=JSON.parse(C.GtRangy.getHighlightPosition.apply(C,arguments)),n=C.frameElement.getBoundingClientRect(),e.top+=n.top,e.left+=n.left,JSON.stringify(e)):(v=t||v,i="[data-gt-highlight-id='"+v+"']",(o=document.querySelectorAll(i)[0])?(n=o.getBoundingClientRect(),JSON.stringify({top:n.top,left:n.left})):JSON.stringify({top:0,left:0}))},z=function(t){var e,n;if(v=t,e="[data-gt-highlight-id='"+v+"']",n=document.querySelectorAll(e)[0],!n)return H(v)},Y=function(t){var e;return e=rangy.createRange(),e.selectNodeContents(document.getElementById(t)),e.toCharacterRange()},H=function(e){var n,i,o,r,l,a,d,c,u,g,s,h,p;for(n=J.concat(q),l=0,a=n.length;l<a;l++)if(u=n[l],(d=JSON.parse(u)).id===e){i=d;break}if(i&&(s=window.location.href.split("/"),i.location!==s.pop()&&!document.querySelector('iframe[src$="'+i.location+'"]')))return s.push(i.location),p=s.join("/"),o=document.createElement("iframe"),o.src=p,o.setAttribute("style",i.style),document.body.appendChild(o),h=document.createElement("style"),c=o.getBoundingClientRect(),h.textContent=Q(c),document.body.appendChild(h),g=document.createElement("span"),g.id="gt-rangy-span-close",r=document.createElement("span"),r.textContent="×",g.appendChild(r),document.body.appendChild(g),r.addEventListener(t.click,function(t){return t.stopPropagation(),o.parentElement.removeChild(o),g.parentElement.removeChild(g),h.parentElement.removeChild(h)},!1)},Z=function(t){var e,n,i;for(n=rangy.createRange(),i=rangy.createRange(),i.selectNodeContents(document.body),I.withinRange=i,n.selectNodeContents(document.body),M.undoToRange(n),Z=t.toLowerCase(),D.splice(0,D.length-1);n.findText(Z,I);)M.applyToRange(n),n.collapse(!1);return e=D.map(function(t){var e,n;return n=t.getBoundingClientRect(),e={left:n.left,top:n.top}}),D.splice(0,D.length-1),e},nt=function(){var t;t=rangy.createRange(),t.selectNodeContents(document.body),M.undoToRange(t)},V=function(t,e){var n,i,o,r,l,a,d,u,g,s;for(null==e&&(e=!0),i={},g=[],l=0,a=t.length;l<a;l++)s=t[l],K=JSON.parse(s),u=A(K.id,K.type,K.content,K.occurenceCount,e),u&&(null!=i[d=u.id]?i[d]:i[d]=[]).push(u);for(r in i)o=i[r],n=c(o),n&&g.push(n);return JSON.stringify(g)},c=function(t){var e,n,i,o;for(e=t[0],n=i=0,o=t.length;i<o;n=++i)K=t[n],n>0&&(K.characterRange.start<e.characterRange.start&&(e.characterRange.start=K.characterRange.start,e.text=K.text+" "+e.text),K.characterRange.end>e.characterRange.end&&(e.characterRange.end=K.characterRange.end,e.text+=" "+K.text));return e.text=encodeURI(e.text),e},A=function(t,e,n,i,o){var r,l,a;for(l=rangy.createRange(),a=rangy.createRange(),N=!1,"highlight"!==e&&(N=o),x=null,a.selectNodeContents(document.body),I.withinRange=a,l.selectNodeContents(document.body),r=1,Z=n.toLowerCase();l.findText(Z,I);){if(r===i){x={backward:!1,id:t,text:n,isNote:!!N},x.characterRange=l.toCharacterRange(),b.applyToRange(l);break}r++,l.collapse(!1)}return x},{init:$,highlight:K,highlightMultiple:K,unlight:it,unlightAll:ot,setColor:_,getHighlightPosition:W,search:Z,undoSearch:nt,migrate:V,setWebReader:et,setFramePosition:tt,focusHighlight:z,getRangeByID:Y}}(window.GtConfig,window.GtSelection);